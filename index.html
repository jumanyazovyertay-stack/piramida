<!DOCTYPE html>
<html lang="uz">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sog'lom Hayot Piramidasi</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
body{
    background: linear-gradient(to bottom, #c7f9ff, #ffffff);
    font-family: sans-serif;
}
.card{
    padding:10px;
    background:white;
    border-radius:8px;
    box-shadow:0 4px 6px rgba(0,0,0,0.2);
    cursor:grab;
    width:160px;
    text-align:center;
}
.pyramid{
    display:flex;
    flex-direction:column;
    align-items:center;
    gap:10px;
}
.row{
    display:flex;
    gap:10px;
}
.slot{
    width:160px;
    height:60px;
    border:2px dashed #999;
    border-radius:8px;
    display:flex;
    align-items:center;
    justify-content:center;
}
.correct{
    background:#86efac;
    border:2px solid #16a34a;
}
</style>
</head>
<body class="p-6">

<h1 class="text-4xl font-bold text-center text-green-700 mb-4">
Sog'lom Hayot Piramidasi
</h1>

<p class="text-center mb-6 text-gray-700">
Kartalarni to‘g‘ri darajaga joylashtiring. Pastda zararli, yuqorida eng foydali!
</p>

<div id="cards" class="flex flex-wrap justify-center gap-3 mb-8"></div>

<div class="pyramid" id="pyramid"></div>

<div class="text-center mt-6">
<button id="finish"
class="bg-purple-600 text-white px-4 py-2 rounded">
Yakunlash
</button>
</div>

<div id="result" class="text-center mt-6 text-2xl font-bold text-blue-700"></div>

<script>

// HAR DARAJAGA MOS MIQDORDA ODATLAR
const habits = [

{ name:"Giyohvandlik", level:1 },

{ name:"Chekish", level:2 },
{ name:"Energetik ichimlik", level:2 },

{ name:"Fast food", level:3 },
{ name:"Telefonni ko‘p ishlatish", level:3 },
{ name:"Uyqu rejimini buzish", level:3 },

{ name:"Sport bilan shug‘ullanish", level:4 },
{ name:"Toza havoda sayr", level:4 },
{ name:"Kitob o‘qish", level:4 },
{ name:"Ijobiy do‘stlar", level:4 },

{ name:"Sog‘lom ovqatlanish", level:5 },
{ name:"Suv ichish", level:5 },
{ name:"8 soat uyqu", level:5 },
{ name:"Ota-onani hurmat qilish", level:5 },
{ name:"Maqsad qo‘yish", level:5 }

];

const cardsDiv=document.getElementById("cards");
const pyramid=document.getElementById("pyramid");

// Kartalarni chiqarish
habits.forEach((habit,i)=>{
let card=document.createElement("div");
card.className="card";
card.innerText=habit.name;
card.draggable=true;
card.dataset.level=habit.level;
cardsDiv.appendChild(card);

card.addEventListener("dragstart",e=>{
e.dataTransfer.setData("text/plain",i);
});
});

// PIRAMIDA SLOT SONI: 1-2-3-4-5
for(let level=1; level<=5; level++){
let row=document.createElement("div");
row.className="row";
row.dataset.level=level;

for(let i=0;i<level;i++){
let slot=document.createElement("div");
slot.className="slot";
slot.dataset.level=level;

slot.addEventListener("dragover",e=>e.preventDefault());

slot.addEventListener("drop",e=>{
e.preventDefault();
let index=e.dataTransfer.getData("text/plain");
let card=cardsDiv.children[index];

if(parseInt(card.dataset.level)===level){
slot.appendChild(card);
slot.classList.add("correct");
}else{
alert("Bu daraja uchun mos emas!");
}
});

row.appendChild(slot);
}
pyramid.appendChild(row);
}

// YAKUNIY XULOSA
document.getElementById("finish").addEventListener("click",()=>{
let countLevel5=0;
document.querySelectorAll(".slot").forEach(slot=>{
let card=slot.querySelector(".card");
if(card && parseInt(card.dataset.level)===5){
countLevel5++;
}
});

document.getElementById("result").innerHTML=
"Siz tanlagan eng foydali odatlar soni: "+countLevel5+
"<br><br>O'zingiz uchun savol: Qaysi odatni bugundan boshlaysiz?";
});

</script>

</body>
</html>
